(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2751:(e,t,r)=>{Promise.resolve().then(r.bind(r,4539))},4539:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ed});var s=r(5155),a=r(2115),n=r(3915),i=r(3004),l=r(5317);let o=(0,n.Wp)({projectId:"fitness-circle-v9lme",appId:"1:477375716953:web:54346e4b29a8d60c8a5b48",storageBucket:"fitness-circle-v9lme.firebasestorage.app",apiKey:"AIzaSyAqi5ScFpSg3_W-ml2wygHOpW5kL9ozTPs",authDomain:"fitness-circle-v9lme.firebaseapp.com",messagingSenderId:"477375716953"}),d=(0,i.xI)(o),c=(0,l._A)(o,{localCache:(0,l.vK)({cacheSizeBytes:0x2800000,garbageCollector:(0,l.$$)()})});var u=r(7608),m=r(9340),f=r(3343),p=r(7481);let x="default-group",h=(0,a.createContext)(void 0);function g(e){let{children:t}=e,[r,n]=(0,a.useState)(null),[o,g]=(0,a.useState)(!0),[v,y]=(0,a.useState)([]),[b,j]=(0,a.useState)(null),[w,N]=(0,a.useState)([]),{toast:k}=(0,p.dj)(),S=(0,a.useCallback)(()=>{n(null),y([]),j(null),N([]),g(!1)},[]),C=(0,a.useCallback)((e,t)=>{console.error("Error during ".concat(t,":"),e),k({title:"Authentication Failed",description:e.message||"An unexpected error occurred. Please try again.",variant:"destructive"})},[k]);(0,a.useEffect)(()=>{let e=(0,i.hg)(d,async e=>{if(e)try{let t=(0,l.H9)(c,"users",e.uid),r=await (0,l.x7)(t);r.exists()&&n({id:r.id,...r.data()})}catch(e){console.error("Error fetching user profile:",e),k({title:"Error",description:"Could not load your profile.",variant:"destructive"})}else S();g(!1)});return()=>e()},[S,k]),(0,a.useEffect)(()=>{let e,t,s;if(r){try{let r=(0,l.H9)(c,"groups",x);e=(0,l.aQ)(r,e=>{if(e.exists()){let t={id:e.id,...e.data()};j(t)}else j(null)},e=>{console.error("Error fetching group:",e),k({title:"Error",description:"Could not load group information.",variant:"destructive"})});let a=(0,l.P)((0,l.rJ)(c,"users"));t=(0,l.aQ)(a,e=>{let t=e.docs.map(e=>({id:e.id,...e.data()}));N(t)},e=>{console.error("Error fetching users:",e),k({title:"Error",description:"Could not load user data.",variant:"destructive"})});let n=(0,l.P)((0,l.rJ)(c,"activities"));s=(0,l.aQ)(n,e=>{let t=e.docs.map(e=>({...e.data(),id:e.id}));y(t)},e=>{console.error("Error fetching activities:",e),k({title:"Error",description:"Could not load activity data.",variant:"destructive"})})}catch(e){console.error("Error setting up data subscriptions:",e),k({title:"Error",description:"There was a problem loading app data.",variant:"destructive"})}return()=>{e&&e(),t&&t(),s&&s()}}},[r,k]);let _=async()=>{let e=(0,l.H9)(c,"groups",x);try{if(!(await (0,l.x7)(e)).exists()){let t={name:"Day Streak Circle",createdAt:(0,u.x)(new Date),ownerId:"system"};await (0,l.BN)(e,t)}}catch(e){console.error("Error ensuring default group exists:",e),k({title:"Setup Error",description:"Failed to create the default group.",variant:"destructive"})}return e},A=async(e,t)=>{try{await (0,i.x9)(d,e,t)}catch(e){throw C(e,"signin"),e}},E=async(e,t)=>{try{await _();let r=(await (0,i.eJ)(d,e,t)).user,s={id:r.uid,email:r.email,name:r.email.split("@")[0],avatarUrl:"https://api.dicebear.com/8.x/big-smiles/svg?seed=".concat(r.uid),groupId:x};await (0,l.BN)((0,l.H9)(c,"users",r.uid),s)}catch(e){throw C(e,"signup"),e}},T=e=>{let t=new Date;return v.some(r=>r.userId===e&&(0,m.r)((0,f.H)(r.date),t))},I=async()=>{if(!r||T(r.id))return;let e={userId:r.id,date:(0,u.x)(new Date)},t="temp-".concat(Date.now());y(r=>[...r,{id:t,...e}]);try{await (0,l.gS)((0,l.rJ)(c,"activities"),e)}catch(e){console.error("Error logging activity:",e),k({title:"Error",description:"Could not save your activity. Please try again.",variant:"destructive"}),y(e=>e.filter(e=>e.id!==t))}};return(0,s.jsx)(h.Provider,{value:{user:r,loading:o,activities:v,group:b,usersInGroup:w,signIn:A,signUp:E,logout:()=>{d.signOut().catch(e=>{console.error("Error signing out:",e),k({title:"Error",description:"Failed to sign out.",variant:"destructive"})})},logActivity:I,getActivitiesForUser:e=>v.filter(t=>t.userId===e),hasUserCompletedActivityToday:T},children:t})}let v=()=>{let e=(0,a.useContext)(h);if(void 0===e)throw Error("useApp must be used within an AppProvider");return e};var y=r(4253),b=r(2085),j=r(9434);let w=(0,b.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),N=a.forwardRef((e,t)=>{let{className:r,variant:a,size:n,asChild:i=!1,...l}=e,o=i?y.DX:"button";return(0,s.jsx)(o,{className:(0,j.cn)(w({variant:a,size:n,className:r})),ref:t,...l})});N.displayName="Button";let k=a.forwardRef((e,t)=>{let{className:r,type:a,...n}=e;return(0,s.jsx)("input",{type:a,className:(0,j.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...n})});k.displayName="Input";var S=r(968);let C=(0,b.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),_=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(S.b,{ref:t,className:(0,j.cn)(C(),r),...a})});_.displayName=S.b.displayName;let A=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,j.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});A.displayName="Card";let E=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,j.cn)("flex flex-col space-y-1.5 p-6",r),...a})});E.displayName="CardHeader";let T=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("h3",{ref:t,className:(0,j.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});T.displayName="CardTitle";let I=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("p",{ref:t,className:(0,j.cn)("text-sm text-muted-foreground",r),...a})});I.displayName="CardDescription";let D=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,j.cn)("p-6 pt-0",r),...a})});D.displayName="CardContent";let z=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,j.cn)("flex items-center p-6 pt-0",r),...a})});function R(e){return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"0",strokeLinecap:"round",strokeLinejoin:"round",...e,children:(0,s.jsx)("path",{d:"M11.2 3.2c-.3-1 .5-2.2 1.6-2.2.8 0 1.5.5 1.6 1.3.2- .5 1-1.3 1.8-1.3 1.1 0 2 .9 2 2 0 .8-.5 1.5-1.2 1.8.8.4 1.2 1.2 1.2 2 0 1.2-.9 2.2-2.2 2.2-.7 0-1.4-.4-1.8-1-.2.8-.9 1.5-1.8 1.5-1.1 0-2.1-.9-2.1-2.1 0-1 .6-1.8 1.5-2.1C11.6 6.6 11 5.4 11 4.2c0-.4.1-.7.2-1zM8.5 7C6.1 7 5 9.1 5 10.8c0 1.2.9 2.8 2.3 4.2C8.6 16.4 10.2 18 12 22c1.8-4 3.4-5.6 4.7-7 1.4-1.4 2.3-3 2.3-4.2C19 9.1 17.9 7 15.5 7c-1.7 0-3.1 1.2-3.5 2.8-.4-1.6-1.8-2.8-3.5-2.8z"})})}function O(e){let{streak:t,...r}=e,a=t&&t>0,n=a?"".concat(t," Day Streak"):"Day Streak";n.length;let i=165+(a?(String(t).length-1)*10+40:0);return(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(i," 50"),width:i,height:"37.5",...r,children:[(0,s.jsx)("defs",{children:(0,s.jsxs)("linearGradient",{id:"logo-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,s.jsx)("stop",{offset:"0%",style:{stopColor:"hsl(var(--primary))",stopOpacity:1}}),(0,s.jsx)("stop",{offset:"100%",style:{stopColor:"hsl(var(--accent))",stopOpacity:1}})]})}),a&&(0,s.jsx)("g",{transform:"translate(0, 8)",children:(0,s.jsx)(R,{style:{color:"hsl(var(--primary))"},width:"24",height:"24"})}),(0,s.jsx)("text",{x:28*!!a,y:"35",fontFamily:"'PT Sans', sans-serif",fontSize:"32",fontWeight:"bold",fill:"url(#logo-gradient)",children:n})]})}function P(){let[e,t]=(0,a.useState)("signin"),[r,n]=(0,a.useState)(""),[i,l]=(0,a.useState)(""),[o,d]=(0,a.useState)(!1),{signIn:c,signUp:u}=v(),{toast:m}=(0,p.dj)(),f=async t=>{t.preventDefault(),d(!0);try{"signin"===e?await c(r,i):await u(r,i)}catch(t){console.error("Error during ".concat(e,":"),t),m({title:"Authentication Failed",description:t.message||"An unexpected error occurred. Please try again.",variant:"destructive"})}finally{d(!1)}};return(0,s.jsxs)("div",{className:"flex min-h-screen flex-col items-center justify-center bg-background p-4",children:[(0,s.jsx)("div",{className:"absolute top-10",children:(0,s.jsx)(O,{})}),(0,s.jsx)(A,{className:"w-full max-w-sm",children:(0,s.jsxs)("form",{onSubmit:f,children:[(0,s.jsxs)(E,{children:[(0,s.jsx)(T,{className:"text-2xl font-headline",children:"signin"===e?"Welcome Back":"Create an Account"}),(0,s.jsx)(I,{children:"signin"===e?"Sign in to continue your streak.":"Join us and start building your streak."})]}),(0,s.jsxs)(D,{className:"grid gap-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(_,{htmlFor:"email",children:"Email"}),(0,s.jsx)(k,{id:"email",type:"email",placeholder:"name@example.com",required:!0,value:r,onChange:e=>n(e.target.value),autoComplete:"email",disabled:o})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(_,{htmlFor:"password",children:"Password"}),(0,s.jsx)(k,{id:"password",type:"password",required:!0,value:i,onChange:e=>l(e.target.value),autoComplete:"signin"===e?"current-password":"new-password",disabled:o})]})]}),(0,s.jsxs)(z,{className:"flex-col gap-4",children:[(0,s.jsx)(N,{type:"submit",className:"w-full bg-accent hover:bg-accent/90",disabled:o,children:o?"Processing...":"signin"===e?"Sign In":"Sign Up"}),(0,s.jsx)(N,{variant:"link",size:"sm",type:"button",onClick:()=>{t(e=>"signin"===e?"signup":"signin")},disabled:o,children:"signin"===e?"Don't have an account? Sign Up":"Already have an account? Sign In"})]})]})})]})}z.displayName="CardFooter";let L=[{id:"dashboard",label:"Today",icon:r(8763).A},{id:"group",label:"Group",icon:function(e){return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"0",strokeLinecap:"round",strokeLinejoin:"round",...e,children:(0,s.jsx)("path",{d:"M16 11c1.7 0 3-1.3 3-3s-1.3-3-3-3-3 1.3-3 3 1.3 3 3 3zm-8 0c1.7 0 3-1.3 3-3S9.7 5 8 5 5 6.3 5 8s1.3 3 3 3zm0 2c-2.3 0-7 1.2-7 3.5V18h14v-1.5c0-2.3-4.7-3.5-7-3.5zm8 0c-.3 0-.6 0-.9.1 1.1.8 1.9 1.8 1.9 3.4V18h6v-1.5c0-2.3-4.7-3.5-7-3.5z"})})}}];function F(e){let{activeView:t,setActiveView:r}=e;return(0,s.jsx)("nav",{className:"fixed bottom-0 left-1/2 -translate-x-1/2 w-full max-w-md border-t bg-background/80 backdrop-blur-sm",children:(0,s.jsx)("div",{className:"flex justify-around p-2",children:L.map(e=>(0,s.jsxs)("button",{onClick:()=>r(e.id),className:(0,j.cn)("flex flex-col items-center justify-center gap-1 rounded-lg p-2 text-muted-foreground transition-colors w-24",t===e.id?"text-primary":"hover:text-primary/80"),children:[(0,s.jsx)(e.icon,{className:(0,j.cn)("h-6 w-6 transition-transform",t===e.id&&"scale-110")}),(0,s.jsx)("span",{className:"text-xs font-medium",children:e.label})]},e.id))})})}var H=r(518),U=r(965),M=r(3158),V=r(9488);function B(e){let{className:t,classNames:r,showOutsideDays:a=!0,...n}=e;return(0,s.jsx)(V.hv,{showOutsideDays:a,className:(0,j.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,j.cn)(w({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative focus-within:relative focus-within:z-20",day:(0,j.cn)(w({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"text-primary-foreground bg-primary hover:bg-primary/90 focus:bg-primary/90",day_today:"bg-background text-foreground",day_outside:"day-outside text-muted-foreground opacity-50",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"",day_hidden:"invisible",...r},components:{IconLeft:e=>{let{className:t,...r}=e;return(0,s.jsx)(U.A,{className:(0,j.cn)("h-4 w-4",t),...r})},IconRight:e=>{let{className:t,...r}=e;return(0,s.jsx)(M.A,{className:(0,j.cn)("h-4 w-4",t),...r})}},...n})}function J(e){let{date:t,completedDays:r}=e,a=r.some(e=>(0,m.r)(e,t));return(0,s.jsxs)("div",{className:(0,j.cn)("relative h-full w-full flex items-center justify-center"),children:[t.getDate(),a&&(0,s.jsx)(H.A,{className:"absolute bottom-1 right-1 h-3 w-3 text-green-600"})]})}function W(e){let{onLogActivity:t,isCelebrating:r}=e,{user:a,getActivitiesForUser:n,hasUserCompletedActivityToday:i}=v();if(!a)return null;let l=n(a.id),o=i(a.id),d=l.map(e=>(0,f.H)(e.date));return(0,s.jsxs)("div",{className:"p-4 md:p-6 space-y-6",children:[(0,s.jsxs)(A,{children:[(0,s.jsxs)(E,{children:[(0,s.jsx)(T,{className:"font-headline",children:"Your Activity"}),(0,s.jsx)(I,{children:o?"Awesome work! You've completed your activity for today.":"Log your activity for today to keep your streak alive!"})]}),(0,s.jsx)(D,{className:"flex justify-center",children:(0,s.jsx)(B,{mode:"multiple",selected:d,className:"p-0",components:{DayContent:e=>(0,s.jsx)(J,{...e,completedDays:d})}})})]}),(0,s.jsx)("div",{className:"flex flex-col items-center justify-center pt-4",children:(0,s.jsx)(N,{size:"lg",className:"w-48 h-16 rounded-full text-lg font-bold shadow-lg bg-accent hover:bg-accent/90 disabled:bg-green-500 disabled:text-white disabled:opacity-100 transition-colors duration-300",onClick:t,disabled:o||r,children:o&&!r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(H.A,{className:"mr-2 h-6 w-6"})," Completed"]}):"Crushed it!"})})]})}B.displayName="Calendar";var q=r(5977);let G=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(q.bL,{ref:t,className:(0,j.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...a})});G.displayName=q.bL.displayName;let Q=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(q._V,{ref:t,className:(0,j.cn)("aspect-square h-full w-full",r),...a})});Q.displayName=q._V.displayName;let Z=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(q.H4,{ref:t,className:(0,j.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",r),...a})});Z.displayName=q.H4.displayName;var Y=r(4913);function $(){let{user:e,group:t,usersInGroup:r,getActivitiesForUser:a}=v();if(!t)return(0,s.jsx)("div",{className:"p-4 text-center",children:"Loading group..."});let n=r.map(e=>({...e,streak:(0,j.n)(a(e.id))})).sort((e,t)=>t.streak-e.streak);return(0,s.jsx)("div",{className:"p-4 md:p-6 space-y-4",children:(0,s.jsxs)(A,{children:[(0,s.jsx)(E,{children:(0,s.jsxs)(T,{className:"font-headline flex items-center gap-2",children:[(0,s.jsx)(R,{className:"w-5 h-5 text-primary"}),"Leaderboard"]})}),(0,s.jsx)(D,{className:"p-0",children:(0,s.jsx)("ul",{className:"space-y-3",children:n.map((r,a)=>{var n;return(0,s.jsxs)("li",{className:(0,j.cn)("flex items-center gap-4 p-3 rounded-lg bg-background hover:bg-muted",e&&r.id===e.id&&"border-2 border-solid border-primary"),children:[(0,s.jsx)("span",{className:"font-bold text-lg w-6 text-center",children:a+1}),(0,s.jsxs)(G,{children:[(0,s.jsx)(Q,{src:r.avatarUrl,alt:r.name}),(0,s.jsx)(Z,{children:null==(n=r.name)?void 0:n.charAt(0)})]}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsxs)("p",{className:"font-semibold flex items-center gap-2",children:[r.name," ",e&&r.id===e.id&&"(you)",r.id===t.ownerId&&(0,s.jsx)(Y.A,{className:"w-4 h-4 text-yellow-500",title:"Group Owner"})]})}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"font-bold text-lg text-primary",children:r.streak}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Day Streak"})]})]},r.id)})})})]})})}function K(){let{loading:e}=v();return e?(0,s.jsx)("div",{className:"h-screen w-full bg-background flex items-center justify-center",children:"Loading..."}):(0,s.jsx)($,{})}var X=r(3349);function ee(){return(0,s.jsx)("div",{className:"w-48 h-48 flex items-center justify-center",children:(0,s.jsxs)("svg",{className:"celebration-check w-full h-full",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 52 52",children:[(0,s.jsx)("circle",{className:"celebration-check-circle",cx:"26",cy:"26",r:"25",fill:"none"}),(0,s.jsx)("path",{className:"celebration-check-mark",fill:"none",stroke:"#166534",d:"M14.1 27.2l7.1 7.2 16.7-16.8"})]})})}var et=r(4228),er=r(154);let es=et.bL,ea=et.l9;et.YJ,et.ZL,et.Pb,et.z6,a.forwardRef((e,t)=>{let{className:r,inset:a,children:n,...i}=e;return(0,s.jsxs)(et.ZP,{ref:t,className:(0,j.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",a&&"pl-8",r),...i,children:[n,(0,s.jsx)(M.A,{className:"ml-auto"})]})}).displayName=et.ZP.displayName,a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(et.G5,{ref:t,className:(0,j.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...a})}).displayName=et.G5.displayName;let en=a.forwardRef((e,t)=>{let{className:r,sideOffset:a=4,...n}=e;return(0,s.jsx)(et.ZL,{children:(0,s.jsx)(et.UC,{ref:t,sideOffset:a,className:(0,j.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...n})})});en.displayName=et.UC.displayName;let ei=a.forwardRef((e,t)=>{let{className:r,inset:a,...n}=e;return(0,s.jsx)(et.q7,{ref:t,className:(0,j.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",a&&"pl-8",r),...n})});function el(){var e;let[t,r]=(0,a.useState)("dashboard"),[n,i]=(0,a.useState)(!1),{user:l,logout:o,logActivity:d,getActivitiesForUser:c,hasUserCompletedActivityToday:u}=v(),m=l?c(l.id):[],f=(0,j.n)(m);return(0,s.jsxs)("div",{className:"flex h-dvh flex-col bg-background",children:[(0,s.jsxs)("header",{className:"flex items-center justify-between p-4 border-b",children:[(0,s.jsx)(O,{streak:f}),(0,s.jsx)("div",{className:"flex items-center gap-4",children:(0,s.jsxs)(es,{children:[(0,s.jsx)(ea,{asChild:!0,children:(0,s.jsxs)(N,{variant:"ghost",className:"flex items-center gap-2 h-10 w-auto p-2",children:[(0,s.jsxs)(G,{className:"h-8 w-8",children:[(0,s.jsx)(Q,{src:null==l?void 0:l.avatarUrl,alt:null==l?void 0:l.name}),(0,s.jsx)(Z,{children:null==l||null==(e=l.name)?void 0:e.charAt(0)})]}),(0,s.jsx)("span",{className:"text-sm font-medium hidden sm:inline-block",children:null==l?void 0:l.name})]})}),(0,s.jsx)(en,{align:"end",children:(0,s.jsxs)(ei,{onClick:o,children:[(0,s.jsx)(X.A,{className:"mr-2 h-4 w-4"}),(0,s.jsx)("span",{children:"Log out"})]})})]})})]}),(0,s.jsx)("main",{className:"flex-1 overflow-y-auto pb-20",children:"group"===t?(0,s.jsx)(K,{}):(0,s.jsx)(W,{onLogActivity:()=>{l&&!u(l.id)&&(d(),i(!0),setTimeout(()=>i(!1),2e3))},isCelebrating:n})}),(0,s.jsx)(F,{activeView:t,setActiveView:r}),n&&(0,s.jsx)("div",{className:"fixed inset-0 bg-background/50 backdrop-blur-sm flex items-center justify-center z-50",children:(0,s.jsx)(ee,{})})]})}function eo(){let{user:e,loading:t}=v();return t?(0,s.jsx)("div",{className:"h-screen w-full bg-background flex items-center justify-center",children:"Loading..."}):e?(0,s.jsx)(el,{}):(0,s.jsx)(P,{})}function ed(){return(0,s.jsx)("main",{className:"min-h-screen",children:(0,s.jsx)(g,{children:(0,s.jsx)(eo,{})})})}ei.displayName=et.q7.displayName,a.forwardRef((e,t)=>{let{className:r,children:a,checked:n,...i}=e;return(0,s.jsxs)(et.H_,{ref:t,className:(0,j.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),checked:n,...i,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(et.VF,{children:(0,s.jsx)(H.A,{className:"h-4 w-4"})})}),a]})}).displayName=et.H_.displayName,a.forwardRef((e,t)=>{let{className:r,children:a,...n}=e;return(0,s.jsxs)(et.hN,{ref:t,className:(0,j.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(et.VF,{children:(0,s.jsx)(er.A,{className:"h-2 w-2 fill-current"})})}),a]})}).displayName=et.hN.displayName,a.forwardRef((e,t)=>{let{className:r,inset:a,...n}=e;return(0,s.jsx)(et.JU,{ref:t,className:(0,j.cn)("px-2 py-1.5 text-sm font-semibold",a&&"pl-8",r),...n})}).displayName=et.JU.displayName,a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(et.wv,{ref:t,className:(0,j.cn)("-mx-1 my-1 h-px bg-muted",r),...a})}).displayName=et.wv.displayName},7481:(e,t,r)=>{"use strict";r.d(t,{dj:()=>m});var s=r(2115);let a=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=l(d,e),o.forEach(e=>{e(d)})}function u(e){let{...t}=e,r=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:r});return c({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||s()}}}),{id:r,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function m(){let[e,t]=s.useState(d);return s.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},9434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>d,n:()=>c});var s=r(2596),a=r(9688),n=r(3343),i=r(9340),l=r(4599),o=r(9140);function d(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}function c(e){if(!e||0===e.length)return 0;let t=e.map(e=>(0,n.H)(e.date)).sort((e,t)=>t.getTime()-e.getTime()).filter((e,t,r)=>r.findIndex(t=>(0,i.r)(t,e))===t);if(0===t.length)return 0;let r=new Date,s=t[0];if(!(0,i.r)(s,r)&&!(0,l.P)(s))return 0;let a=1,d=s;for(let e=1;e<t.length;e++){let r=t[e];if(1===(0,o.m)(d,r))a++,d=r;else break}return a}}},e=>{var t=t=>e(e.s=t);e.O(0,[644,992,182,288,441,684,358],()=>t(2751)),_N_E=e.O()}]);